# Rese
「Rese」は飲食店予約管理システムです。掲載された店舗の一覧を閲覧することが出来ます。また店舗の予約と気に入った店舗にマークを付けることも出来ます。

## 作成した目的
Laravel学習のまとめとして作成いたしました。提示された要件や成果物のイメージをもとに設計・コーディングを行いました。

## アプリケーションURL
デプロイしていないためURLはありません

## 他のリポジトリ
ありません

## 使用技術
1. PHP 7.4.9
2. Laravel v8.83.8
3. mysql:8.0.26
4. Fortify
5. JavaScript
6. Mailtrap

## 機能一覧
・会員登録機能→名前、メールアドレス、パスワード、確認用パスワードが入力項目となっています。  
・メール認証機能→会員登録後に送信されるメールでの認証を経て本登録完了となっています。  
・ログイン機能→メールアドレスとパスワードでログイン出来、ログアウト機能もついています。  
・検索機能→エリア検索とジャンル検索が出来ます。またフリーワード検索も可能です。  
・お気に入り機能→店舗ごとに灰色のハートマークが表示されており、お気に入り追加した場合マークが赤色に、お気に入りを削除した場合マークが灰色に戻ります。お気に入りに追加した店舗はマイページで閲覧可能です。  
・店舗ソート機能→評価の高い順、評価の低い順、ランダムでそれぞれソートすることが可能です。  
・店舗詳細閲覧機能→店舗一覧ページ内に配置されている各店舗情報の中に「詳しくみる」ボタンを設置しており選択すると店舗の詳細画面に遷移します。  
・予約機能→店舗詳細画面より予約が可能です。予約のキャンセルも出来ます。  
・口コミ投稿機能→店舗来店予定日時終了後から口コミ機能を利用することが可能です。  
・口コミ編集機能→ログインユーザーは自身の口コミに対して編集することが可能です。  
・口コミ削除機能→ログインユーザーは自身が投稿した口コミを削除することが可能です。  
・リマインダーメール機能→予約当日の午前9時にリマインドメールが送信されますのでご確認ください。  
・QRコードでの予約認証機能→リマインドメール内に予約内容と予約情報が入ったQRコードも表示されますので予約した店舗にご来店の際はスタッフにQRコードを提示してください。

### 管理者専用機能 
・口コミ削除機能→管理者専用口コミ一覧ページよりユーザーが投稿した口コミの削除が可能です。  
・新規店舗追加機能→管理者専用新規店舗追加ページより店舗の追加が可能です。

### 非会員ユーザーには利用できない機能
・お気に入り機能  
・予約機能  
・口コミ投稿機能(投稿された口コミの閲覧は可能)  

## 機能に関する注意点
・店舗予約及び予約変更とお気に入りの追加及び削除はメール認証による本登録が完了したユーザーがログインされている状態で使用できる機能となります。ログインしていない場合はログイン画面に遷移されます。   
・メール認証にはMailtrapを使用しています。Mailtrapをお持ちでない方はアカウント登録してからご利用ください。  
・新規会員登録後の送信されるメールに記載されたリンク先が本登録完了ユーザーのログイン画面になっておりますのでそのログイン画面からログインを行ってください。メール認証せずログインを行うと「メールをご確認ください」というページに遷移しますので、「確認メールを再送信する」ボタンを押し送信されるメールより必ず本登録を完了させてください。  
・店舗の予約は翌日以降から可能です。当日予約はお電話にてお問い合わせください。  
・お気に入りした店舗はマイページ内に掲載されますが、お気に入りを削除するとマイページから消えるため、再度飲食店一覧ページよりお気に入りの追加を行ってください。  
・フリーワード検索ではエリアとジャンルを検索することは出来ませんので、店名を検索してください。  
・口コミは1店舗につき1投稿となります。投稿内容を変更したい場合は店舗詳細ページに「全ての口コミ情報」ページへ遷移するリンクがありますのでそのリンクより「全ての口コミ情報」ページへ遷移し自身の口コミを探してください。ログインユーザーの口コミのみ「口コミの編集」と「口コミの削除」リンクがありますので口コミの編集ページより口コミの編集をしてください。

## ダミーデータの説明
1.	管理者  
・ユーザー名: 管理者  
・メールアドレス: admin@admin.com  
・パスワード: password  
2.  テストユーザー  
・ユーザー名: testuser  
・メールアドレス: test@example.com  
・パスワード: password

## テーブル設計
![スクリーンショット_5-10-2024_15932_docs google com](https://github.com/user-attachments/assets/01ec6b9e-fae2-442e-9cd6-e148eca26da2)
![スクリーンショット_5-10-2024_151714_docs google com](https://github.com/user-attachments/assets/d55f6a2f-994e-45c9-9d2f-9cbf1a92ccd2)  
![Image](https://github.com/user-attachments/assets/f9ae2a39-4db0-43d9-b002-d4879e49f664)  
![Image](https://github.com/user-attachments/assets/5be43ce1-e51b-476c-9c94-1f0e1e1d3db6)  
![Image](https://github.com/user-attachments/assets/e7de2688-2bba-4c46-9e5d-ffd3f1677def)

## ER図
![スクリーンショット_5-10-2024_152120_docs google com](https://github.com/user-attachments/assets/1ef55ca3-a02d-4abe-a698-092936011158)

## 環境構築

### コマンドライン上
$docker-compose up -d -build  
$docker-compose exec php bash

### PHPコンテナ内
$composer install

### src上
$cp .env.example .env

### PHPコンテナ内
$php artisan key:generate  
$php artisan migrate  
$php artisan db:seed  
$php artisan storage:link

## 新規店舗追加方法
1. 店舗追加用サンプルフォーマットを[こちら](https://github.com/Chayney/reservation/blob/master/csv_import.csv)からダウンロード(クリック後は右上の"Download raw file"ボタンでダウンロード)  
2. フォーマットに既に記載された見出し項目以外は削除してご使用ください。見出し項目に対して全て入力(全項目入力必須)  
3. 管理者でログインし「新規店舗追加」ページへ遷移  
4. 「ファイルを選択」ボタンをクリックしダウンロードしたcsvファイルを選択  
5. 「インポート」ボタンをクリック  

### フォーマット作成時の注意点(csvファイルインポート時にエラーが出ます。)
・店舗名は50文字以内で入力してください  
・地域は「東京都」「大阪府」「福岡県」のいずれかで入力してください  
・ジャンルは「寿司」「焼肉」「イタリアン」「居酒屋」「ラーメン」のいずれかで入力してください  
・店舗概要は400文字以内で入力してください  
・画像URLの形式はjpg、jpeg、pngのみアップロード可能となっております
